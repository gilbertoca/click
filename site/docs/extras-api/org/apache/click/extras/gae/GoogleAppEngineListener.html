<!DOCTYPE HTML>
<html lang="pt">
<head>
<!-- Generated by javadoc (17) on Thu Dec 12 14:40:24 BRT 2024 -->
<title>GoogleAppEngineListener (Click Extras API - v2.4.0)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-12-12">
<meta name="description" content="declaration: package: org.apache.click.extras.gae, class: GoogleAppEngineListener">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.click.extras.gae</a></div>
<h1 title="Class GoogleAppEngineListener" class="title">Class GoogleAppEngineListener</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.click.extras.gae.GoogleAppEngineListener</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/EventListener.html" title="class or interface in java.util" class="external-link">EventListener</a></code>, <code><a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextListener.html" title="class or interface in javax.servlet" class="external-link">ServletContextListener</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">GoogleAppEngineListener</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextListener.html" title="class or interface in javax.servlet" class="external-link">ServletContextListener</a></span></div>
<div class="block">Provides <a href="http://code.google.com/appengine/docs/java/overview.html" class="external" target="_blank">Google App Engine</a>
 (GAE) support for Click applications. GAE is a free Java hosting service
 provided by Google that allows you to quickly and easily make your Click
 applications available online.

 <h3>Configuration</h3>

 To deploy Click applications to GAE, you need to set the
 <code>GoogleAppEngineListener</code> listener in your <code>web.xml</code>:

 <pre class="codeHtml">
 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 &lt;web-app xmlns="http://java.sun.com/xml/ns/javaee" version="2.5"&gt;

     &lt;listener&gt;
         &lt;listener-class&gt;<span class="red">org.apache.click.extras.gae.GoogleAppEngineListener</span>&lt;/listener-class&gt;
     &lt;/listener&gt;

     &lt;servlet&gt;
         &lt;servlet-name&gt;ClickServlet&lt;/servlet-name&gt;
         &lt;servlet-class&gt;org.apache.click.ClickServlet&lt;/servlet-class&gt;
         &lt;load-on-startup&gt;0&lt;/load-on-startup&gt;
     &lt;/servlet&gt;
     &lt;servlet-mapping&gt;
         &lt;servlet-name&gt;ClickServlet&lt;/servlet-name&gt;
         &lt;url-pattern&gt;*.htm&lt;/url-pattern&gt;
     &lt;/servlet-mapping&gt;
 &lt;/web-app&gt; </pre>

 You also need to configure GAE to exclude <code>*.htm</code> files from being
 served as static resources. Also you should enable <code>http-session</code>
 support. You set these changes in the GAE file <code>war/WEB-INF/appengine-web.xml</code>:

 <pre class="codeHtml">
 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 &lt;appengine-web-app xmlns="http://appengine.google.com/ns/1.0"&gt;
     &lt;application>myapp&lt;/application&gt;
     &lt;version&gt;1&lt;/version&gt;

       &lt;!-- Configure java.util.logging --&gt;
     &lt;system-properties&gt;
         &lt;property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/&gt;
     &lt;/system-properties&gt;

     &lt;!-- Enable HttpSession usage --&gt;
     &lt;<span class="blue">sessions-enabled</span>&gt;<span class="red">true</span>&lt;/<span class="blue">sessions-enabled</span>&gt;

     &lt;!-- Exclude *.htm files from being served as static files by GAE,
             because the *.htm extension is mapped to ClickServlet. --&gt;
     &lt;static-files&gt;
         &lt;<span class="blue">exclude</span> path="<span class="red">**.htm</span>" /&gt;
     &lt;/static-files&gt;

 &lt;/appengine-web-app&gt; </pre>

 <h3>Performance Filter</h3>

 If you use Click's <a href="../filter/PerformanceFilter.html" title="class in org.apache.click.extras.filter"><code>PerformanceFilter</code></a>
 you should also exclude the following static files from GAE, so that
 PerformanceFilter can set their <code>expiry headers</code>:
 <code>*.css</code>, <code>*.js</code>, <code>*.png</code> and <code>*.gif</code>. For example:

 <pre class="codeHtml">
 &lt;?xml version="1.0" encoding="utf-8"?&gt;
 &lt;appengine-web-app xmlns="http://appengine.google.com/ns/1.0"&gt;

     ...

     &lt;!-- Exclude the following files from being served as static files by GAE,
             as they will be processed by Click's PerformanceFilter. --&gt;
     &lt;static-files&gt;
         &lt;<span class="blue">exclude</span> path="<span class="red">**.htm</span>" /&gt;
         &lt;<span class="blue">exclude</span> path="<span class="red">**.css</span>" /&gt;
         &lt;<span class="blue">exclude</span> path="<span class="red">**.js</span>" /&gt;
         &lt;<span class="blue">exclude</span> path="<span class="red">**.png</span>" /&gt;
         &lt;<span class="blue">exclude</span> path="<span class="red">**.gif</span>" /&gt;
     &lt;/static-files&gt;

 &lt;/appengine-web-app&gt; </pre>

 <h3>File Uploads</h3>

 GAE does not allow web application to write to files on disk. This poses a
 problem for the <a href="https://click.apache.org/docs/click-api/org/apache/click/control/FileField.html" title="class or interface in org.apache.click.control" class="external-link"><code>FileField</code></a> control that
 depends on <a class="external" target="_blank" href="http://commons.apache.org/fileupload/">Commons FileUpload</a>
 which stores uploaded files on disk. To work around this limitation Click
 provides the <a href="MemoryFileUploadService.html" title="class in org.apache.click.extras.gae"><code>MemoryFileUploadService</code></a> which stores uploaded files in
 memory.
 <p/>
 Below is an example configuration of a <a href="MemoryFileUploadService.html" title="class in org.apache.click.extras.gae"><code>MemoryFileUploadService</code></a>:

 <pre class="prettyprint">
 &lt;click-app charset="UTF-8"&gt;
     &lt;pages package="com.myapp.pages"/&gt;
     &lt;mode value="production"/&gt;

     &lt;file-upload-service classname="org.apache.click.extras.gae.MemoryFileUploadService"&gt;
         &lt;!-- Set the total request maximum size to 10mb (10 x 1024 x 1024 = 10485760).
                 The default request upload size is unlimited. --&gt;
         &lt;property name="sizeMax" value="10485760"/&gt;

         &lt;!-- Set the maximum individual file size to 2mb (2 x 1024 x 1024 = 2097152).
             The default file upload size is unlimited. --&gt;
         &lt;property name="fileSizeMax" value="2097152"/&gt;
    &lt;/file-upload-service&gt;
 &lt;/click-app&gt; </pre>

 <h2>Limitations</h2>

 <h3>Page Automapping</h3>
 GAE does not always adhere to the Servlet specification. One of the areas that affects
 Click directly is the <a href="../../../../../../user-guide/html/ch05s02.html#application-automapping">automatic mapping</a>
 of Page templates to page classes. GAE does not implement the ServletContext
 method <code>getResourcePaths("/")</code>. Instead of returning the resources under
 the web-app root, it returns an empty set. Click needs these resources to map
 between page templates and classes, and since GAE does not return anything,
 it isn't possible to perform the automapping.
 <p/>
 Fortunately GAE does work properly for resources under subfolders of the web-app root.
 For example if the folders <span class="blue">/path</span> or <span class="blue">/paths</span>
 exists under the web-app root, calling <code>getResourcePaths("/path")</code> or
 <code>getResourcePaths("/paths")</code> will return the set of resources contained
 under these folders.
 <p/>
 Taking advantage of the fact that GAE supports subfolders, Click
 provides automapping support to GAE applications with a slight caveat: Page
 templates <b>must</b> be placed under the folders <span class="blue">/path</span>
 or <span class="blue">/paths</span> of the web-app root. Click explicitly
 maps these two folders if it is running on GAE, other subfolders are not supported.
 <p/>
 <b>Please note:</b> manual mapping works as expected.
 <p/>
 Below is an automapping example for the folder <span class="blue">/page</span>
 (note the page template <code>index.htm</code> is not placed under the folder
 <code>/page</code>, and has to be mapped manually):

 <pre class="codeConfig">
 /index.htm
 <span class="blue">/page</span>/search.htm
 <span class="blue">/page</span>/customer/customer-edit.htm
 <span class="blue">/page</span>/customer/customer-search.htm </pre>

 The Page classes are placed under the <span class="blue">page</span> package:

 <pre class="codeConfig">
 com.mycorp<span class="blue">.page</span>.IndexPage.java
 com.mycorp<span class="blue">.page</span>.SearchPage.java
 com.mycorp<span class="blue">.page</span>.customer.CustomerEditPage.java
 com.mycorp<span class="blue">.page</span>.customer.CustomerSearchPage.java </pre>

 Lastly define the <code>click.xml</code> to automatically map page templates
 and classes under the package <code>com.mycorp</code>:

 <pre class="prettyprint">
 &lt;click-app&gt;

   &lt;pages package="com.mycorp"&gt;
     &lt;page path="/index.htm" classname="page.IndexPage"/&gt;
   &lt;/pages&gt;

   &lt;mode value="production"/&gt;

 &lt;/click-app&gt; </pre>

 <b>Please note:</b> automapping will work in a GAE <code>development</code> environment
 but not when hosted on the server. GAE uses the Jetty server for local development
 which properly implements <code>getResourcePaths("/")</code>.
 <p/>
 <b>Also note:</b> when running Click on GAE in development mode, it will appear
 that automapping is working when it really isn't. This is because
 Click uses a variety of ways to detect new page templates in development mode.
 So even though automapping failed, Click still serves page requests because it
 used an alternative way of looking up the template template. While these techniques
 are useful for development modes it impacts performance and is not used
 in production mode.

 <h3>Deployment limitation</h3>

 On application startup, Click automatically deploys all its JavaScript, CSS
 and image resources to the "<code>/click</code>" folder in the root directory of
 the webapp. Since GAE doesn't allow writing to disk, Click cannot
 automatically deploy its resources.
 <p/>
 Please see the user-guide section,
 <a href="../../../../../../user-guide/html/ch05s03.html#deploying-restricted-env">Deploying resources in a restricted environment</a>,
 for various solutions.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">GoogleAppEngineListener</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Creates a default GoogleAppEngineListener.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#contextDestroyed(javax.servlet.ServletContextEvent)" class="member-name-link">contextDestroyed</a><wbr>(<a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextEvent.html" title="class or interface in javax.servlet" class="external-link">ServletContextEvent</a>&nbsp;servletContextEvent)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method does nothing.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#contextInitialized(javax.servlet.ServletContextEvent)" class="member-name-link">contextInitialized</a><wbr>(<a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextEvent.html" title="class or interface in javax.servlet" class="external-link">ServletContextEvent</a>&nbsp;servletContextEvent)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This method does nothing.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>GoogleAppEngineListener</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">GoogleAppEngineListener</span>()</div>
<div class="block">Creates a default GoogleAppEngineListener.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="contextDestroyed(javax.servlet.ServletContextEvent)">
<h3>contextDestroyed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">contextDestroyed</span><wbr><span class="parameters">(<a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextEvent.html" title="class or interface in javax.servlet" class="external-link">ServletContextEvent</a>&nbsp;servletContextEvent)</span></div>
<div class="block">This method does nothing.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextListener.html#contextDestroyed-javax.servlet.ServletContextEvent-" title="class or interface in javax.servlet" class="external-link">contextDestroyed</a></code>&nbsp;in interface&nbsp;<code><a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextListener.html" title="class or interface in javax.servlet" class="external-link">ServletContextListener</a></code></dd>
<dt>Parameters:</dt>
<dd><code>servletContextEvent</code> - the event class for notifications about
 changes to the servlet context</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="contextInitialized(javax.servlet.ServletContextEvent)">
<h3>contextInitialized</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">contextInitialized</span><wbr><span class="parameters">(<a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextEvent.html" title="class or interface in javax.servlet" class="external-link">ServletContextEvent</a>&nbsp;servletContextEvent)</span></div>
<div class="block">This method does nothing.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextListener.html#contextInitialized-javax.servlet.ServletContextEvent-" title="class or interface in javax.servlet" class="external-link">contextInitialized</a></code>&nbsp;in interface&nbsp;<code><a href="https://javaee.github.io/javaee-spec/javadocs/javax/servlet/ServletContextListener.html" title="class or interface in javax.servlet" class="external-link">ServletContextListener</a></code></dd>
<dt>Parameters:</dt>
<dd><code>servletContextEvent</code> - the event class for notifications about
 changes to the servlet context</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
